:8080 {
	log {
		output stdout
		level DEBUG
	}

	# Backend API routes
	handle /api/* {
		reverse_proxy 127.0.0.1:5000
	}

	# Health check
	handle /health {
		respond "Caddy is OK" 200
	}

	# CRM application - must be before public site handler
	handle_path /crm* {
		root * /app/crm/dist
		try_files {path} /index.html
		file_server
	}

	# Public site (default)
	handle {
		root * /app/public-site/dist
		try_files {path} /index.html
		file_server
	}
}
